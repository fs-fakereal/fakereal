<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Login - Fake Real</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../static/css/base.css">
    <link rel="stylesheet" href="../static/css/results.css">
    <link rel="stylesheet" href="../static/css/footer.css">
    
    <script src=
"https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js">
    </script>
    
    <script src=
"https://files.codepedia.info/files/uploads/iScripts/html2canvas.js">
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  </head>

  <body>
    <div class="main-content-results">
      <!-- Results Image -->
      <div class="results-section" id="results-download">
        <div class="results-download" id="download-results">
          <h2>Results</h2>
          <p class="company-stampmark">Scanned with FakeReal.</p>
          <br>
          <!-- Previews the Image -->
          <div id="image-box" class="image-box">
            <img src="{{ url_for('static', filename='imgs/uploads/' + image) }}" class="scanned_image" alt="tested-img">
          </div>
          <br>

          <!-- Result -->
          <div class="verdict" id="img-verdict">
            <!-- <p>Scanned to be {{ result.score }}</p> -->

            <script>     
              // ignore the error, this works,, unless yk a way to fix this
              const imgScore = {{ result.score }};
              const numScore = Math.round(imgScore * 100);

              const verdict = document.querySelector('#img-verdict');

              // verdict.innerHTML = `${imgScore}`;
              if (imgScore <= 0) {
                verdict.innerHTML += `
                  <p>Scanned to be ${numScore}% AI-generateed.</p>
                  <p style="font-weight: bold;">Final Verdict: This is not an AI-generateed image.</p>
                `;
              }
              if (imgScore > 0) {
                verdict.innerHTML += `
                  <p>Scanned to be ${numScore}% AI-generateed.</p>
                  <p style="font-weight: bold;">Final Verdict: This is an AI-generateed image.</p>
                `;
              }
            </script>
          </div>
        </div>
      </div>
          
      <div class="download-section">
        
        <div id="previewImage"></div>

<<<<<<< HEAD
        <div class="buttons-download">
          <button id="download-prev">Preview Download!</button>
=======
        <!-- Result -->
        <div class="verdict" id="img-verdict">
          <!-- <p>Scanned to be {{ result.score }}</p> -->

          <script>     
            // ignore the error, this works,, unless yk a way to fix this
            const imgScore = {{ result.score }};
            const numScore = Math.round(imgScore * 100);

            const verdict = document.querySelector('#img-verdict');

            // verdict.innerHTML = `${imgScore}`;
            if (imgScore <= 0) {
              verdict.innerHTML += `
                <p>Scanned ${numScore}% to be AI-generateed.</p>
                <p>Final Verdict: This is not an AI-generateed image.</p>
              `;
            }
            if (imgScore > 0) {
              verdict.innerHTML += `
                <p>Scanned ${numScore} percent to be AI-generateed.</p>
                <p>Final Verdict: This is an AI-generateed image.</p>
              `;
            }
          </script>
>>>>>>> 002b528e81542fd9b89b16d6fbea46fa17fd8132
        </div>
        <!-- <a id="download" href="#">Share your Results!</a> -->

        <script>
          $(document).ready(function() {
          
          // Global variable
          var element = $("#results-download"); 
      
          // Global variable
          var getCanvas; 

          $("#download-prev").on("click", function () {
            html2canvas(element[0]).then(function (canvas) {
              $("#previewImage").empty().append(canvas);
              getCanvas = canvas;
            });

            const downloadSec = document.querySelector(".buttons-download");

            downloadSec.innerHTML = `<button id="download" href="#">Share your Results!</button>`;

          });

          $("#download").on('click', function() {
            if (!getCanvas) {
              alert("Please preview the image first.");
              return;
            }

            var imageData = 
                getCanvas.toDataURL("image/png");
        
            // Now browser starts downloading 
            // it instead of just showing it
            var newData = imageData.replace(
            /^data:image\/png/, "data:application/octet-stream");
        
            $("#download")
              .attr("download", "FakeReal_Results.png")
              .attr("href", newData);
            });
          });
        </script>
      </div>

      <!-- Previous Data -->
      <!-- <div class="filter-photos">
        <h3>Filter:</h3>
        <div class="fake-real">
          <p>---</p>
          <p>Ai-generated</p>
          <p>Non Ai-generated</p>
        </div>

        <div class="by-dates">
          <p>---</p>
          <p>By Month</p>
          <p>By Year</p>
        </div>
      </div> -->

      <!-- images list -->
       <!-- <div class="previous-img-data">
          <p>No image have been tested :[</p>
       </div> -->
    </div>


    <script src="../static/js/results.js"></script>
    <script src="../static/js/upload-limit.js"></script>
    <script src="../static/js/results-outcome.js"></script>
  </body>
</html>